<DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>CLUPDD main page</title>
  <link rel="stylesheet" href="main.css">
  <script type="text/javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
  </script>

  <div class="heading">
    <div class="image">
      <img src="https://www.evolbio.mpg.de/3137526/header_image-1474449073.jpg?t=eyJ3aWR0aCI6ODQ4LCJvYmpfaWQiOjMxMzc1MjZ9--8b53007891cfeb7a165dbf424bfd9e301cc95e23"/>
    </div>
    <div class="headertext">
      <h1>CLUPDD</h1>
      <h3>The Clunio marinus Population Diferentiation Database</h3>
    </div>
  </div>

  <div class="navbar">
      <nav>
        <ul class="main_menu">
          <li><a href="main_page.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="Fst.html">Calculate Fst</a></li>
          <li><a href="http://cluniobase.cibiv.univie.ac.at/home">ClunioBase</a></li>
          <li><a href="https://bioed.bu.edu/students_21/group_proj/group_C/jbrowse/index.html">Jbrowse</a></li>
        </ul>
      </nav>
      <a class="upload_button" href="upload.html"><button >Upload Files</button></a>
  </div>
</head>

<body>
  <div class="search_display">
    <h3>Query the database</h3>
    <div class="select_query">
      <div class="select_query_buttons">
        <button id="SNPbutton">Search by SNP</button>
        <button id="Genebutton">Search by Gene</button>
        <button id="Regionbutton">Search by Region</button>
        <button id="Advancedbutton">Advanced Search</button>
      </div>
      <form id="search_snp" action="Submit" method="get">
        Chromosome: <select id="chrom">
         <option value="chr1">1</option>
         <option value="chr2">2</option>
         <option value="chr3">3</option>
         </select>
         Position: <input type="text" id="pos" />
        <input type="submit" value="Search" />
      </form>
        <form id="search_gene" action="Submit" method="get">
         Gene name: <input type="text" id="gene_name" />
        <input type="submit" value="Search" />
      </form>
      <form id="search_region" action="Submit" method="get">
        Chromosome: <select id="chrom">
         <option value="chr1">1</option>
         <option value="chr2">2</option>
         <option value="chr3">3</option>
         </select>
         Start position: <input type="text" id="start_pos" />
         End position: <input type="text" id="end_pos" />
        <input type="submit" value="Search" />
      </form>
      <form id="advanced_search" action="Submit" method="get">
        <p style="font-weight: 600;">Advanced search allows for more felxible queries but will run slower</p>
        <p>Blank fields assume no contraints on those fields</p>
        Chromosome: <select id="chrom">
         <option value="1">1</option>
         <option value="2">2</option>
         <option value="3">3</option>
         </select>
         Start position: <input type="text" id="start_pos" />
         End position: <input type="text" id="end_pos" />
         <br/><br/>
         Gene name: <input type="text" id="gene_name" />
         <br/><br/>
         GO Term: <input type="text" id="go_term" />
         <br/><br/>
         SNP Effect: <input type="text" id="effect" />
         SNP Impact: <select id="impact">
           <option value=""></option>
           <option value="HIGH">HIGH</option>
           <option value="MODERATE">MODERATE</option>
           <option value="LOW">LOW</option>
           <option value="MODIFIER">MODIFIER</option>
         </select>
         <br/><br/>
         Population: <input type="text" id="pop" />
         Sample: <input type="text" id="sample" />
         <br/><br/>
         Experiment: <input type="text" id="experiment" />
         <br/><br/>
         <input type="submit" value="Search" />
      </form>
      <script type="text/javascript">
        $(document).ready(function(){
          $("#search_snp").hide();
          $("#search_gene").hide();
          $("#search_region").hide();
          $("#advanced_search").hide();
          $('#SNPbutton').click(function(){
                $("#search_snp").toggle();
                $("#search_gene").hide();
                $("#search_region").hide();
                $("#advanced_search").hide();
             });
           $('#Genebutton').click(function(){
                 $("#search_gene").toggle();
                 $("#search_snp").hide();
                 $("#search_region").hide();
                 $("#advanced_search").hide();
              });
            $('#Regionbutton').click(function(){
                  $("#search_region").toggle();
                  $("#search_gene").hide();
                  $("#search_snp").hide();
                  $("#advanced_search").hide();
              });
            $('#Advancedbutton').click(function(){
                  $("#advanced_search").toggle();
                  $("#search_region").hide();
                  $("#search_gene").hide();
                  $("#search_snp").hide();
               });
          });
      </script>
    </div>
    <div class="results_container">
      <div class="toggle_results">
        <p id="hide_res">Hide results</p>
        <p id="show_res">Show results</p>
      </div>
      <div class="results" id="results">
        <p>results placeholder</p>
      </div>
      <script type="text/javascript">
        $(document).ready(function(){
          $("#results_container").hide();
          $("#show_res").hide();
          $("#hide_res").click(function(){
            $("#hide_res").hide();
            $("#show_res").show();
            $("#results").hide();
          });
          $("#show_res").click(function(){
            $("#show_res").hide();
            $("#hide_res").show();
            $("#results").show();
          });
          $("form").onsubmit(function(event){
            event.preventDefault();
            $("#results_container").show();
            getResultRows();
          });
          var getResultRows = function(){
            chrom = $("#chromosome").val();
            pos = $("#position").val();
            gene_name = $("#gene_name").val();
            start_pos = $("#start_pos").val();
            end_pos = $("#end_pos").val();
            go_term = $("#go_term").val();
            effect = $("#effect").val();
            impact = $("#impact").val();
            pop = $("#pop").val();
            sample = $("#sample").val();
            experiment = $("#experiment").val();
            $.ajax({
                url: 'https://bioed.bu.edu/cgi-bin/gbenson/getInfoFromPathwaysDbForAjax2.py',
                type: 'get',
                data: {'submit':'submit','path_name':path_name}, //send to the program
                success: function(response){
                    // clear any existing html in the ppiTable div
                    $("#ppiTable").empty();
                    //append the table title
                    $("#ppiTable").append("<h3>Interacting Proteins</h3>");
                    //append the names of the target gene and pathway
                    $("#ppiTable").append("<br><b>Target Gene: "+gene_name+"</b><br>");
                    $("#ppiTable").append("<b>Pathway: "+path_name+"</b>");
                    //append the header line of the interacting proteins table
                    $("#ppiTable").append("<table><tbody><tr><th>Protein 1</th><th>Protein 2</th><th>Pathway</th></tr></tbody></table>");
                    $("#ppiTable tbody").append(response)
                }
        });
      </script>
    </div>
  </div>

  <div class="jbrowse">
      <iframe
          src="https://bioed.bu.edu/students_21/group_proj/group_C/jbrowse/index.html"
          style="border: 1px solid black"
          width="600"
          height="300"
      >
      </iframe>
  </div>
</body>
