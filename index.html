<DOCTYPE html>
<html>
<style type="text/css">
table
{
    border-collapse: collapse;
    border-spacing: 0;
}

table
{
    width: 100%;
    table-layout: auto;
}

td, th
{
    text-align: center;
    border: 0px solid #000000;
}

</style>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>CLUPDD main page</title>
  <link rel="stylesheet" href="main.css">
  <script type="text/javascript"
  src="https://code.jquery.com/jquery-3.4.1.js">
  </script>

  <div class="heading">
    <div class="image">
      <img src="https://www.evolbio.mpg.de/3137526/header_image-1474449073.jpg?t=eyJ3aWR0aCI6ODQ4LCJvYmpfaWQiOjMxMzc1MjZ9--8b53007891cfeb7a165dbf424bfd9e301cc95e23"/>
    </div>
    <div class="headertext">
      <h1>CLUPDD</h1>
      <h3>The Clunio marinus Population Diferentiation Database</h3>
    </div>
  </div>

  <div class="navbar">
      <nav>
	<ul class="main_menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="Fst.html">Calculate Fst</a></li>
          <li><a href="http://cluniobase.cibiv.univie.ac.at/home">ClunioBase</a></li>
          <li><a href="https://bioed.bu.edu/students_21/group_proj/group_C/jbrowse/index.html">Jbrowse</a></li>
        </ul>
      </nav>
      <a class="download_button"><button>Download</button></a>
  </div>
</head>

<body>
  <div class="search_display">
    <h3>Query the database</h3>
    <div class="select_query">
      <div class="select_query_buttons">
        <button id="SNPbutton">Search by SNP</button>
        <button id="Genebutton">Search by Gene</button>
        <button id="Regionbutton">Search by Region</button>
        <button id="Advancedbutton">Advanced Search</button>
      </div>
      <form id="search_snp">
        Chromosome: <select id="s-chrom">
         <option value="chr1">1</option>
         <option value="chr2">2</option>
         <option value="chr3">3</option>
         </select>
         Position: <input type="number" id="s-pos" />
        <input type="submit" id="submit" value="Search" />
      </form>
      <form id="search_gene">
         Gene name: <input type="text" id="g-gene_name" />
        <input type="submit" value="Search" />
      </form>
      <form id="search_region">
        Chromosome: <select id="r-chrom">
         <option value="chr1">1</option>
         <option value="chr2">2</option>
         <option value="chr3">3</option>
         </select>
         Start position: <input type="number" id="r-start_pos" />
         End position: <input type="number" id="r-end_pos" />
        <input type="submit" value="Search" />
      </form>
      <form id="advanced_search">
        <p style="font-weight: 600;">Advanced search allows for more flexible queries but will run slower</p>
        <p>Help on queries can be found in the about page</p>
        <textarea id="advanced_query" rows="6" cols="70"></textarea>
        <br></br>
       <input type="submit" value="Search" />
    </form>
    <script type="text/javascript">
      $(document).ready(function(){
        $("#search_snp").hide();
        $("#search_gene").hide();
        $("#search_region").hide();
        $("#advanced_search").hide();
        $('#SNPbutton').click(function(){
              $("#search_snp").toggle();
              $("#search_gene").hide();
              $("#search_region").hide();
              $("#advanced_search").hide();
           });
         $('#Genebutton').click(function(){
               $("#search_gene").toggle();
               $("#search_snp").hide();
               $("#search_region").hide();
               $("#advanced_search").hide();
            });
            $('#Regionbutton').click(function(){
                  $("#search_region").toggle();
                  $("#search_gene").hide();
                  $("#search_snp").hide();
                  $("#advanced_search").hide();
              });
            $('#Advancedbutton').click(function(){
                  $("#advanced_search").toggle();
                  $("#search_region").hide();
                  $("#search_gene").hide();
                  $("#search_snp").hide();
               });
          });
      </script>
    </div>
    <div class="results_container" id="results_container">
      <div class="toggle_results">
        <p id="hide_res">Hide results</p>
        <p id="show_res">Show results</p>
      </div>
      <div class="results" id="results">
      </div>
</div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    $('#results_container').hide();
    $("#show_res").hide();
    $("#hide_res").click(function(){
      $("#hide_res").hide();
      $("#show_res").show();
      $("#results").hide();
    });
    $("#show_res").click(function(){
      $("#show_res").hide();
      $("#hide_res").show();
      $("#results").show();
    });
    $("#search_snp").on('submit', function(event){
      event.preventDefault();
      $('#results_container').show();
      $("#results").show()
      getSnpResultRows();
      });
    $("#search_gene").on('submit', function(event){
      event.preventDefault();
      $('#results_container').show();
      $("#results").show()
      getGeneResultRows();
      });
    $("#search_region").on('submit', function(event){
      event.preventDefault();
      $('#results_container').show();
      $("#results").show()
      getRegionResultRows();
      });
    $("#advanced_search").on('submit', function(event){
      event.preventDefault();
      $('#results_container').show();
      $("#results").show()
      getAdvancedResultRows();
      });
    });
     var getSnpResultRows = function(){
       chrom = $("#s-chrom").val();
       pos = $("#s-pos").val();
       $.ajax({
          url: 'https://bioed.bu.edu/cgi-bin/students_21/group_proj/group_C/CLUPDD_main_query.py',
          type: 'get',
          data: {'submit':'submit','chromosome':chrom, 'position':pos},
          success: function(response){
          $("#results").empty();
          $("#results").append("<h3>SNP: Chromosome "+chrom+", Position "+pos+"</h3>");
          $("#results").append(response);
        }
      });
     };
      var getGeneResultRows = function(){
        gene = $("#g-gene_name").val();
        $.ajax({
           url: 'https://bioed.bu.edu/cgi-bin/students_21/group_proj/group_C/CLUPDD_main_query.py',
           type: 'get',
           data: {'submit':'submit','gene':gene},
           success: function(response){
           $("#results").empty();
           $("#results").append("<h3>Gene: "+gene+"</h3>");
           $("#results").append(response);
         }
       });
      };
       var getRegionResultRows = function(){
         chrom = $("#r-chrom").val();
         start = $("#r-start_pos").val();
         end = $("#r-end_pos").val();
         $.ajax({
            url: 'https://bioed.bu.edu/cgi-bin/students_21/group_proj/group_C/CLUPDD_main_query.py',
            type: 'get',
            data: {'submit':'submit','chromosome':chrom, 'start':start, 'end':end}, //send to the program
            success: function(response){
            $("#results").empty();
            $("#results").append("<h3>Chromosome "+chrom+", Position "+start+"-"+end+"</h3>");
            $("#results").append(response);
          }
        });
       };
         var getAdvancedResultRows = function(){
           query = $("#advanced_query").val();
           $.ajax({
              url: 'https://bioed.bu.edu/cgi-bin/students_21/group_proj/group_C/CLUPDD_main_query.py',
              type: 'get',
              data: {'submit':'submit','query':query}, //send to the program
              success: function(response){
              $("#results").empty();
              $("#results").append("<h3>"+query+"</h3>");
              $("#results").append(response);
            }
          });
         };
</script>

<div class="jbrowse">
  <iframe
      src="https://bioed.bu.edu/students_21/group_proj/group_C/jbrowse/index.html"
      style="border: 1px solid black"
      width="600"
      height="300">
  </iframe>
</div>
</body>
</html>

